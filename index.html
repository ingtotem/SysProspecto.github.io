<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>ELIZA · Creación de Oportunidades</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
/* === ESTILOS (IGUAL QUE ANTES, FUNCIONALES) === */
:root{
  --bg:#f4f6fb;
  --card:#ffffff;
  --border:#e4e7ec;
  --text:#1d2939;
  --muted:#667085;
  --primary:#2e90fa;
  --success:#12b76a;
  --warning:#fdb022;
  --danger:#f04438;
}
*{box-sizing:border-box}
body{margin:0;font-family:Inter,system-ui;background:var(--bg);color:var(--text)}
.app{display:grid;grid-template-columns:280px 1fr;min-height:100vh}
.sidebar{background:#fff;border-right:1px solid var(--border);padding:24px}
.logo{font-weight:700;font-size:18px;margin-bottom:32px}
.step{display:flex;gap:12px;margin-bottom:16px;color:var(--muted)}
.step.active{color:var(--primary);font-weight:600}
.circle{width:22px;height:22px;border-radius:50%;border:2px solid var(--border);display:flex;align-items:center;justify-content:center;font-size:12px}
.step.active .circle{border-color:var(--primary)}
.content{padding:32px}
.card{background:#fff;border:1px solid var(--border);border-radius:16px;padding:24px;margin-bottom:24px}
.card h2{margin:0 0 16px;font-size:16px}
.grid{display:grid;gap:16px}
.g-2{grid-template-columns:repeat(2,1fr)}
.g-3{grid-template-columns:repeat(3,1fr)}
.g-4{grid-template-columns:repeat(4,1fr)}
label{font-size:13px;color:var(--muted)}
input,select,textarea{width:100%;padding:12px;border-radius:10px;border:1px solid var(--border)}
.btn-add{border:1px dashed var(--primary);background:#fff;color:var(--primary);padding:8px 14px;border-radius:999px;font-weight:600;cursor:pointer}
.primary{background:var(--primary);color:#fff;border:none;padding:12px 20px;border-radius:10px;font-weight:600}
.localidad-card,.contacto-card,.linea-block{border:1px solid var(--border);border-radius:12px;padding:12px;margin-top:12px}
.subcats{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:10px;margin-top:10px}
.subcat{border:2px solid var(--border);border-radius:10px;padding:10px;cursor:pointer}
.subcat.active{border-color:var(--primary);background:#eff8ff}
.actions{display:flex;justify-content:flex-end}

/* MODAL */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.4);display:none;align-items:center;justify-content:center;z-index:999}
.modal.active{display:flex}
.modal-content{background:#fff;border-radius:16px;padding:24px;width:100%;max-width:640px}
.modal-header{display:flex;justify-content:space-between;margin-bottom:16px}
</style>
</head>

<body>

<div class="app">

<div class="sidebar">
  <div class="logo">ELIZA</div>
  <div class="step active"><div class="circle">1</div>Creación</div>
  <div class="step"><div class="circle">2</div>Por atender</div>
</div>

<div class="content">

<!-- UBICACION -->
<div class="card">
<h2>Ubicación del proyecto</h2>
<button class="btn-add" id="btnAddLocalidad">➕ Agregar localidad</button>
<div id="localidadesList"></div>
</div>

<!-- CONTACTOS -->
<div class="card">
<h2>Contactos adicionales</h2>
<button class="btn-add" id="btnAddContacto">➕ Agregar otro contacto</button>
<div id="contactosList"></div>
</div>

<!-- LINEAS -->
<div class="card">
<h2>Líneas de negocio</h2>
<button class="btn-add" id="btnAddLinea">➕ Agregar línea</button>
<div id="lineasContainer"></div>
</div>

<div class="actions">
<button class="primary">Guardar oportunidad</button>
</div>

</div>
</div>

<!-- MODAL LOCALIDAD -->
<div class="modal" id="modalLocalidad">
<div class="modal-content">
<div class="modal-header">
<h3>Nueva localidad</h3>
<button id="closeModal">✕</button>
</div>

<div class="grid g-2">
<input id="locNombre" placeholder="Nombre localidad">
<input id="locGPS" placeholder="Coordenadas GPS">
</div>

<div class="grid g-2" style="margin-top:12px">
<select id="provincia"></select>
<select id="canton"></select>
</div>

<textarea id="locObs" placeholder="Observaciones" style="margin-top:12px"></textarea>

<div class="actions">
<button id="saveLocalidad" class="primary">Guardar</button>
</div>
</div>
</div>

<script>
/* ========= UBICACIONES ========= */
const DATA={Guayas:["Guayaquil","Durán"],Pichincha:["Quito","Rumiñahui"]};
const modal=document.getElementById("modalLocalidad");
const provincia=document.getElementById("provincia");
const canton=document.getElementById("canton");
const localidadesList=document.getElementById("localidadesList");

Object.keys(DATA).forEach(p=>{
  provincia.innerHTML+=`<option value="${p}">${p}</option>`;
});

provincia.onchange=()=>{
  canton.innerHTML="";
  DATA[provincia.value].forEach(c=>{
    canton.innerHTML+=`<option>${c}</option>`;
  });
};

document.getElementById("btnAddLocalidad").onclick=()=>modal.classList.add("active");
document.getElementById("closeModal").onclick=()=>modal.classList.remove("active");

document.getElementById("saveLocalidad").onclick=()=>{
  localidadesList.innerHTML+=`
    <div class="localidad-card">
      ${locNombre.value} - ${provincia.value} / ${canton.value}
    </div>`;
  modal.classList.remove("active");
};

/* ========= CONTACTOS ========= */
document.getElementById("btnAddContacto").onclick=()=>{
  contactosList.innerHTML+=`
    <div class="contacto-card">
      <input placeholder="Nombre">
      <input placeholder="Cargo">
      <input placeholder="Teléfono">
      <button onclick="this.parentNode.remove()">Eliminar</button>
    </div>`;
};

/* ========= LINEAS ========= */
const LINEAS={
  "Seguridad Electrónica":["CCTV","Intrusión","Control de Accesos"],
  "IT":["Redes","WiFi"]
};

document.getElementById("btnAddLinea").onclick=()=>{
  const id=Math.random().toString(36).substr(2,5);
  lineasContainer.innerHTML+=`
    <div class="linea-block">
      <select onchange="renderSub('${id}',this.value)">
        <option value="">Selecciona línea</option>
        ${Object.keys(LINEAS).map(l=>`<option>${l}</option>`).join("")}
      </select>
      <div class="subcats" id="sub-${id}"></div>
    </div>`;
};

function renderSub(id,linea){
  const c=document.getElementById("sub-"+id);
  c.innerHTML="";
  LINEAS[linea].forEach(s=>{
    const d=document.createElement("div");
    d.className="subcat";
    d.textContent=s;
    d.onclick=()=>d.classList.toggle("active");
    c.appendChild(d);
  });
}
</script>

</body>
</html>
